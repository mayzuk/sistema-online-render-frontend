import React, { useEffect, useState } from 'react'
import AdminLayout from './AdminLayout'
import { api } from '../../services/api'


export default function AdminDashboard(){
const [data, setData] = useState({ totalUsers:0, totalComunidades:0, totalCities:0 })
const [loading, setLoading] = useState(true)


useEffect(()=>{
async function load(){
try{
setLoading(true)
const res = await api.get('/api/admin/dashboard')
setData(res.data)
}catch(err){
console.error(err)
}finally{ setLoading(false) }
}
load()
},[])


if(loading) return <p>Carregando painel admin...</p>


return (
<AdminLayout title="Painel Administrativo">
<div className="grid grid-cols-1 md:grid-cols-3 gap-4">
<div className="bg-white p-4 rounded-lg shadow">
<div className="text-sm text-slate-500">Usu√°rios</div>
<div className="text-2xl font-bold">{data.totalUsers}</div>
</div>
<div className="bg-white p-4 rounded-lg shadow">
<div className="text-sm text-slate-500">Comunidades</div>
<div className="text-2xl font-bold">{data.totalComunidades}</div>
</div>
<div className="bg-white p-4 rounded-lg shadow">
<div className="text-sm text-slate-500">Cidades</div>
<div className="text-2xl font-bold">{data.totalCities}</div>
</div>
</div>
</AdminLayout>
)
}